<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹æµ‹ä½ æ˜¯å“ªç§çŒ«å’ª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap');
        body {
            font-family: 'ZCOOL KuaiLe', sans-serif;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .text-shadow { text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .text-shadow-lg { text-shadow: 3px 3px 6px rgba(0,0,0,0.3); }
        .progress-ring-circle {
            transition: stroke-dashoffset 0.1s linear;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        @keyframes float-animation {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .float-animation {
            animation: float-animation 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-orange-100 flex items-center justify-center min-h-screen">

    <div class="container max-w-sm mx-auto text-center p-4">
        
        <!-- Test Area -->
        <div id="test-area" class="relative w-64 h-64 mx-auto transition-transform duration-300">
            <div class="progress-container absolute inset-0 flex items-center justify-center">
                <svg class="w-full h-full">
                    <circle class="text-gray-300" stroke-width="15" stroke="currentColor" fill="transparent" r="110" cx="128" cy="128"/>
                    <circle id="progressCircle" class="text-orange-400 progress-ring-circle" stroke-width="15" stroke-linecap="round" stroke="currentColor" fill="transparent" r="110" cx="128" cy="128"/>
                </svg>
                <div id="press-hint" class="absolute text-gray-500 text-lg">é•¿æŒ‰è¿™é‡Œæµ‹è¯•</div>
                <div id="progressPercentage" class="absolute text-3xl font-bold text-orange-500 hidden">0%</div>
            </div>
        </div>
        
        <p id="instruction-text" class="mt-8 text-xl text-gray-700">é•¿æŒ‰å±å¹•ï¼Œçœ‹çœ‹ä½ æ˜¯å“ªç§å¯çˆ±çŒ«å’ªï¼</p>

        <!-- Result Area -->
        <div id="result-area" class="hidden mt-8">
            <div class="bg-white rounded-2xl shadow-xl p-6 transform transition-all duration-500">
                <div id="result-emoji" class="text-8xl float-animation"></div>
                <h2 id="result-title" class="text-3xl font-bold mt-4 text-orange-500"></h2>
                <p id="result-description" class="mt-2 text-gray-600"></p>
                <p id="result-analysis" class="mt-4 text-sm text-left bg-orange-50 p-3 rounded-lg"></p>
                <button id="retestButton" class="mt-6 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-6 rounded-full transition-colors duration-300">é‡æ–°æµ‹è¯•</button>
            </div>
            <p class="mt-4 text-xs text-gray-400">æç¤ºï¼šç»“æœå·²ä¿å­˜ï¼Œåˆ·æ–°ä¹Ÿä¸ä¼šæ”¹å˜å“¦ï¼</p>
        </div>

        <!-- Footer -->
        <footer class="mt-8 text-center text-sm text-gray-500">
            <p>ğŸ¾</p>
        </footer>

    </div>

    <script>
        const catResults = [
            { id: 1, name: "å¥½å¥‡å®å®çŒ«", emoji: "ğŸ˜¼", description: "å¯¹ä¸–ç•Œå……æ»¡æ— é™å¥½å¥‡ï¼Œå“ªé‡Œæœ‰é£å¹è‰åŠ¨éƒ½å°‘ä¸äº†ä½ ã€‚", analysis: "ä½ åƒä¸€åªå¯¹æ¯›çº¿çƒå……æ»¡å…´è¶£çš„å°çŒ«ï¼Œä¹äºæ¢ç´¢æœªçŸ¥ï¼Œæ€»èƒ½å‘ç°ç”Ÿæ´»ä¸­çš„å°æƒŠå–œã€‚ä½ çš„å¥½å¥‡å¿ƒæ˜¯ä½ æœ€å¤§çš„é­…åŠ›ï¼" },
            { id: 2, name: "æ‡’æ´‹æ´‹çš„çŒ«", emoji: "ğŸ˜´", description: "å¦‚æœèƒ½èººç€ï¼Œç»ä¸åç€ã€‚æœ€å¤§çš„çˆ±å¥½æ˜¯æ™’å¤ªé˜³å’Œæ‰“ç›¹ã€‚", analysis: "ä½ æ·±è°™â€œçŒ«ç”Ÿå“²å­¦â€ï¼Œæ‡‚å¾—äº«å—å®‰é€¸å’Œèˆ’é€‚ã€‚å¯¹ä½ æ¥è¯´ï¼Œæœ€æƒ¬æ„çš„äº‹è«è¿‡äºåœ¨ä¸€ä¸ªæ¸©æš–çš„åˆåï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œé™é™å‘å‘†ã€‚" },
            { id: 3, name: "ä¼˜é›…è´µæ—çŒ«", emoji: "ğŸ’…", description: "æ­¥ä¼è½»ç›ˆï¼Œä¸¾æ­¢ä¼˜é›…ï¼Œè‡ªå¸¦ä¸€ç§ä¸å¯ä¾µçŠ¯çš„è´µæ—æ°”è´¨ã€‚", analysis: "ä½ å°±åƒä¸€åªå‡ºèº«åé—¨çš„çŒ«å’ªï¼Œå¯¹ç”Ÿæ´»å“è´¨æœ‰è¦æ±‚ï¼Œæ³¨é‡ç»†èŠ‚å’Œç¾æ„Ÿã€‚ä½ ç‹¬ç«‹è€Œè‡ªä¿¡ï¼Œæ€»èƒ½ä¿æŒè‡ªå·±çš„èŠ‚å¥ã€‚" },
            { id: 4, name: "æ£è›‹é¬¼çŒ«", emoji: "ğŸ˜¹", description: "å®¶é‡Œæ‰€æœ‰èƒ½æ¨ä¸‹æ¡Œå­çš„ä¸œè¥¿ï¼Œéƒ½é€ƒä¸è¿‡ä½ çš„é­”çˆªã€‚", analysis: "ä½ æ´»æ³¼å¥½åŠ¨ï¼Œæ˜¯å®¶é‡Œçš„â€œå¼€å¿ƒæœâ€å’Œâ€œç ´åç‹â€ã€‚ä½ çš„ç”Ÿæ´»å……æ»¡äº†ä¹è¶£å’Œæ¶ä½œå‰§ï¼Œæ€»èƒ½ç»™èº«è¾¹çš„äººå¸¦æ¥æ¬¢ç¬‘ï¼ˆå’Œæ— å¥ˆï¼‰ã€‚" },
            { id: 5, name: "ç²˜äººç²¾çŒ«", emoji: "ğŸ˜»", description: "æœ€å–œæ¬¢åœ¨ä¸»äººèº«è¾¹è¹­æ¥è¹­å»ï¼Œæ±‚æŠ±æŠ±æ±‚æ‘¸æ‘¸ã€‚", analysis: "ä½ æƒ…æ„Ÿä¸°å¯Œï¼Œéå¸¸ä¾æ‹ä½ å–œæ¬¢çš„äººã€‚é™ªä¼´æ˜¯ä½ æœ€é•¿æƒ…çš„å‘Šç™½ï¼Œä½ æ¸´æœ›ä¸äººå»ºç«‹äº²å¯†çš„è”ç³»ï¼Œå¹¶ä»ä¸­è·å¾—å®‰å…¨æ„Ÿã€‚" },
            { id: 6, name: "ç¤¾æè‡ªé—­çŒ«", emoji: "ğŸ™€", description: "ç”Ÿäººå‹¿è¿‘ï¼ä¸€æœ‰é™Œç”Ÿäººæ¥è®¿ï¼ŒåºŠåº•å°±æ˜¯ä½ æ°¸è¿œçš„å®¶ã€‚", analysis: "ä½ å†…å¿ƒä¸–ç•Œä¸°å¯Œï¼Œä½†æ›´å–œæ¬¢ç‹¬å¤„ã€‚åœ¨ç†Ÿæ‚‰çš„ç¯å¢ƒå’Œäººé¢å‰ï¼Œä½ ä¼šå¾ˆæ”¾æ¾ï¼Œä½†é¢å¯¹é™Œç”Ÿç¯å¢ƒä¼šæ„Ÿåˆ°ç´§å¼ ï¼Œéœ€è¦æ—¶é—´æ¥é€‚åº”ã€‚" }
        ];

        const progressCircle = document.getElementById('progressCircle');
        const progressPercentage = document.getElementById('progressPercentage');
        const pressHint = document.getElementById('press-hint');
        const testArea = document.getElementById('test-area');
        const instructionText = document.getElementById('instruction-text');
        
        const resultArea = document.getElementById('result-area');
        const resultEmoji = document.getElementById('result-emoji');
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const resultAnalysis = document.getElementById('result-analysis');
        const retestButton = document.getElementById('retestButton');
        const progressContainer = document.querySelector('.progress-container');

        const radius = progressCircle.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;
        progressCircle.style.strokeDasharray = `${circumference} ${circumference}`;
        progressCircle.style.strokeDashoffset = circumference;

        const requiredHoldTime = 3000; // 3 seconds
        let startTime;
        let isHolding = false;
        let progressInterval;
        
        let audioContext;

        function initializeAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            if (!audioContext) return;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.05);
            
            if (type === 'complete') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                oscillator.frequency.exponentialRampToValueAtTime(1046.50, audioContext.currentTime + 0.2); // C6
            }
            
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.3);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        function setProgress(percent) {
            const offset = circumference - (percent / 100) * circumference;
            progressCircle.style.strokeDashoffset = offset;
            progressPercentage.textContent = `${Math.round(percent)}%`;
        }

        function handleHoldStart(e) {
            e.preventDefault();
            if (localStorage.getItem('catTestResult')) return;
            
            initializeAudio();

            isHolding = true;
            startTime = Date.now();
            pressHint.classList.add('hidden');
            progressPercentage.classList.remove('hidden');
            instructionText.textContent = "è¯·ä¸è¦æ¾æ‰‹...";

            testArea.classList.add('scale-105');

            progressInterval = setInterval(updateProgress, 30);
        }

        function handleHoldEnd() {
            if (!isHolding) return;
            isHolding = false;
            clearInterval(progressInterval);
            resetProgress();
            instructionText.textContent = "é•¿æŒ‰å±å¹•ï¼Œçœ‹çœ‹ä½ æ˜¯å“ªç§å¯çˆ±çŒ«å’ªï¼";
            testArea.classList.remove('scale-105');
        }

        function updateProgress() {
            const elapsedTime = Date.now() - startTime;
            let progress = (elapsedTime / requiredHoldTime) * 100;
            if (progress > 100) progress = 100;

            setProgress(progress);

            if (progress >= 100) {
                clearInterval(progressInterval);
                generateResult();
            }
        }
        
        function resetProgress() {
            setProgress(0);
            pressHint.classList.remove('hidden');
            progressPercentage.classList.add('hidden');
        }

        function generateResult() {
            playSound('complete');
            const result = catResults[Math.floor(Math.random() * catResults.length)];
            localStorage.setItem('catTestResult', JSON.stringify(result));
            showResult(result);
        }

        function showResult(result) {
            testArea.classList.add('hidden');
            instructionText.classList.add('hidden');
            resultArea.classList.remove('hidden');
            
            resultEmoji.textContent = result.emoji;
            resultTitle.textContent = result.name;
            resultDescription.textContent = result.description;
            resultAnalysis.textContent = result.analysis;

            resultArea.style.opacity = 0;
            resultArea.style.transform = 'translateY(20px)';
            setTimeout(() => {
                resultArea.style.opacity = 1;
                resultArea.style.transform = 'translateY(0)';
            }, 100);
        }

        function handleRetest() {
            localStorage.removeItem('catTestResult');
            resetProgress();
            
            resultArea.classList.add('hidden');
            testArea.classList.remove('hidden');
            instructionText.classList.remove('hidden');
            instructionText.textContent = "é•¿æŒ‰å±å¹•ï¼Œçœ‹çœ‹ä½ æ˜¯å“ªç§å¯çˆ±çŒ«å’ªï¼";
        }
        
        // Event Listeners
        progressContainer.addEventListener('mousedown', handleHoldStart);
        document.addEventListener('mouseup', handleHoldEnd);
        progressContainer.addEventListener('touchstart', handleHoldStart, { passive: false });
        document.addEventListener('touchend', handleHoldEnd);
        document.addEventListener('touchcancel', handleHoldEnd);
        retestButton.addEventListener('click', handleRetest);

        // Check for saved result on load
        window.addEventListener('load', () => {
            const savedResult = localStorage.getItem('catTestResult');
            if (savedResult) {
                showResult(JSON.parse(savedResult));
            } else {
                setProgress(0);
            }
        });
    </script>
</body>
</html>